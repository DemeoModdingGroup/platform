{
  "openapi": "3.0.0",
  "info": {
    "title": "Demeo Mods API",
    "version": "0.1.0",
    "contact": {
      "name": "Demeo Modding Group Discord",
      "url": "https://discord.gg/XYphVbfaqh"
    }
  },
  "servers": [
    {
      "description": "Primary API server",
      "url": "https://api.demeomods.xyz/v0/",
      "variables": {}
    }
  ],
  "tags": [
    {
      "name": "Metadata",
      "description": "Metadata related requests"
    },
    {
      "name": "Mods",
      "description": "Mod related requests"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "Get metadata from the root of the API",
        "tags": [
          "Metadata"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mods": {
      "get": {
        "tags": [
          "Mods"
        ],
        "summary": "",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/mod"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mods/{modId}": {
      "get": {
        "tags": [
          "Mods"
        ],
        "description": "",
        "parameters": [
          {
            "in": "path",
            "name": "modId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mod"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "mod": {
        "title": "Mod",
        "type": "object",
        "description": "A single mod.",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the mod.",
            "example": "Demeo Utilities"
          },
          "aliases": {
            "type": "array",
            "description": "Other names the mod has been known as.",
            "items":{
              "type": "string"
            }
          },
          "versions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/modVersion"
            }
          },
          "authors": {
            "type": "array",
            "items":{
              "$ref": "#/components/schemas/author"
            }
          },
          "description": {
            "type": "string",
            "description": "The mod's description."
          },
          "icon": {
            "type": "string",
            "description": "URL of the mod's icon."
          }
        }
      },
      "modVersion": {
        "title": "Mod Version",
        "type": "object",
        "description": "A mod's version.",
        "properties": {
          "id": {
            "type": "integer",
            "description": "An int id for the version."
          },
          "approved": {
            "type": "boolean",
            "description": "Whether or not the version has been approved by staff."
          },
          "name": {
            "type": "string",
            "description": "The version name."
          },
          "modName": {
            "type": "string",
            "description": "The name of the mod this version is for."
          },
          "modId": {
            "type": "integer",
            "description": "The id of the mod this version is for."
          },
          "platforms": {
            "type": "array",
            "description": "Platforms supported by the version.",
            "uniqueItems": true,
            "items": {
              "type": "string",
              "enum": [
                "PC",
                "QUEST"
              ]
            }
          },
          "dependencies": {
            "type": "array",
            "description": "List of other mods required by the version.",
            "items": {
              "$ref": "#/components/schemas/modRef"
            }
          },
          "file": {
            "$ref": "#/components/schemas/file"
          }
        }
      },
      "file": {
        "title": "File",
        "type": "object",
        "description": "A file for a mod or mod version.",
        "properties": {
          "hash": {
            "type": "string",
            "description": "File hash as shown in MelonLoader"
          },
          "url": {
            "type": "string",
            "description": "The URL where the file can be downloaded from.",
            "example": "https://api.demeomods.xyz/v0/file/{hash}/{ModName}.dll"
          }
        }
      },
      "author": {
        "title": "Author",
        "type": "object",
        "description": "An author of a mod.",
        "properties": {
          "id": {
            "type": "integer",
            "description": "The id of the author."
          },
          "name": {
            "type": "string",
            "description": "The author's name."
          },
          "discord": {
            "type": "string",
            "description": "The author's Discord UserId"
          },
          "avatar": {
            "type": "string",
            "description": "URL of the author's avatar"
          }
        }
      },
      "modRef": {
        "title": "Mod Reference",
        "type": "object",
        "properties": {
          "modName": {
            "type": "string",
            "description": "Name of mod referenced"
          },
          "version": {
            "type": "string",
            "description": "Semver constraint for the required version."
          }
        }
      }
    }
  }
}